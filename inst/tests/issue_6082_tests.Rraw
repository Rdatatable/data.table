# This file contains tests 1196.1 and 1196.2 from tests.Rraw for testing test.data.table().
# Issue #6082 identifed that these tests failed if the user had run `setNumericRounding(2)` before running test.data.table().

test = data.table:::test
INT = data.table:::INT

# nice example from : http://stackoverflow.com/questions/21885290/data-table-roll-nearest-returns-multiple-results
x = 0.0275016249293408
DT = data.table(rnk = c(0, 0.0909090909090909, 0.181818181818182, 0.272727272727273),
                val = c(0.0233775088495975, 0.0270831481152598, 0.0275016216267234, 0.0275016249293408))
DT[3, val:=0.0275016249291963] # val[3] and val[4] are now equal, within 2 byte rounding
setkey(DT,val)
test(1196.1, DT[,.N,by=val]$N, INT(1,1,1,1))
test(1196.2, DT[.(x),.N], 1L)
